# Техническое задание на проект: TripPlanner

## 1. Цель проекта
Веб-сервис для планирования поездок: пользователь создаёт поездку, добавляет активности по дням, ведёт бюджет, формирует список вещей (**packing-лист**) и получает краткий прогноз погоды по направлению. Дополнительно на сайте есть **сводная страница с простой аналитикой** по поездкам и расходам.

---

## 2. Целевая аудитория и роли пользователей
**ЦА:** студенты и путешественники, которые планируют короткие поездки на **2–14 дней** и хотят держать в одном месте **план, бюджет и список вещей**.

### Роли
1. **Гость**
   - Просмотр **публичных поездок** (список/детали).
2. **Авторизованный пользователь**
   - Создание/редактирование/удаление **своих поездок**.
   - Управление **активностями**, **тегами**, **бюджетом** и **packing-листом**.
   - **Фильтрация и сортировка** списка поездок.
3. **Администратор (Django Admin)** *(опционально)*
   - Управление моделями через админ-панель (поиск, фильтры, списки).

---

## 3. Модели данных (минимум 3 кастомные модели)

### 3.1 `Destination` (Направление)
**Поля:** `name`, `country`, `lat`, `lon`, `created_at`

### 3.2 `Trip` (Поездка)
**Поля:** `owner (FK User)`, `destination (FK Destination)`, `title`, `start_date`, `end_date`, `is_public`, `created_at`

### 3.3 `Activity` (Активность / план на день)
**Поля:** `trip (FK Trip)`, `date`, `title`, `description`, `cost`, `created_at`

### 3.4 `Tag` (Тег)
**Поля:** `user (FK User)`, `name`, `color`

### 3.5 `PackingItem` (Предмет)
**Поля:** `user (FK User)`, `name`, `category`

### 3.6 `TripPackingItem` (Предмет в поездке)
**Поля:** `trip (FK Trip)`, `item (FK PackingItem)`, `quantity`, `is_packed`, `note`

### Связи
- `Destination` **1—M** `Trip`
- `User` **1—M** `Trip` *(owner)*
- `Trip` **1—M** `Activity`
- `User` **1—M** `Tag`
- `Activity` **M—M** `Tag`
- `User` **1—M** `PackingItem`
- `Trip` **M—M** `PackingItem` через `TripPackingItem`

---

## 4. Ключевой функционал (User Stories)

1. **Создание поездки**
   - Пользователь создаёт поездку (направление, даты, название).
   - Система сохраняет поездку и показывает страницу деталей.

2. **Планирование активностей**
   - Пользователь добавляет активность на конкретную дату (описание, стоимость, теги).
   - Система сохраняет активность и пересчитывает сумму расходов по поездке.

3. **Аналитика бюджета**
   - Пользователь открывает страницу поездки.
   - Система показывает **диаграммы расходов** по дням и по тегам, а также краткие метрики: **потрачено / осталось / процент бюджета**.

4. **Packing-лист**
   - Пользователь добавляет предметы в список вещей поездки и отмечает **«упаковано»**.
   - Система хранит **количество**, **заметки** и состояние **упаковано/не упаковано**.

5. **Погода по направлению**
   - Пользователь открывает страницу поездки и запрашивает прогноз.
   - Система обращается к API и показывает прогноз *(используется кэш, чтобы не делать лишние запросы)*.

6. **Список поездок**
   - Пользователь открывает список поездок, применяет **поиск**, **фильтр по направлению** и **сортировку** (по дате/бюджету/новизне).

---

## 5. Технический стек и внешние интеграции
- **Backend:** Python, Django, Django ORM  
- **DB:** SQLite *(MVP)*  
- **Frontend:** HTML/CSS, Bootstrap, JS  
- **Визуализация:** Chart.js *(диаграммы расходов)*  
- **Внешнее API:** Open-Meteo *(прогноз погоды по координатам)*  

---

## 6. Изменения в ходе реализации
Появились уточнения по функционалу: добавлены **фильтрация/сортировка** списка поездок, **сводные метрики** на странице поездки и **кэширование** запросов погоды.
